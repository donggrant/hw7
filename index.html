<!--
	Link: cs4640.cs.virginia.edu/gdd7jh/hw7
	Sources:
	https://www.w3schools.com/
-->
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Lights Out</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" 
        rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" 
        crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1"> 

		<meta name="author" content="Grant Dong and Hunter Vaccaro">
		<meta name="description" content="Lights Out Game">
		<meta name="keywords" content="lights out game colors grid">   
    
	</head>  
	<body>

        <form id="form" style="margin:5%;">
            <div class="h-100 p-5 bg-light border rounded-3">
                <h2>Create your Grid!</h2>
                <br>
                <div class="form-group">
                    <p>Number of Rows</p>
                    <input class="form-control" type="number" id="rows", name="rows" value=""/>
                </div>
                <br>
                <div class="form-group">
                    <p>Number of Columns:</p>
                    <input class="form-control" type="number" id="columns" name="columns" value=""/>
                </div>
                <br>
                <button type="submit" class="btn btn-primary">START</button>
            </div>
        </form>

        <div id="display" style="margin:5%; width:80%;">

        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <script type="text/javascript" src="index.js"></script>
        <script>

            var rows = 0;
            var columns = 0;
            var grid = [];

            function makeBoard(){
                $("#display").append("<tr>");
                for(let i = 0; i < columns; i++) {
                    var tmp = "";
                    for(let j = 0; j < rows; j++){   
                        if(grid[j][i] === 1){
                            tmp += "<div style='background-color:lightblue; width:100px; height:100px; margin:5px;'></div>";
                        }else{
                            tmp +="<div style='background-color:blue; width:100px; height:100px; margin:5px;'></div>";
                        }    
                    }
                    $("#display").append("<td>"+ tmp + "</td>")
                }
                $("#display").append("</tr>");
            }

            $('form').on('submit', function (e) {
                e.preventDefault();

                rows = parseInt($("input[name=rows]").val());
                columns = parseInt($("input[name=columns]").val());
                grid = Array(rows).fill().map(() => Array(columns).fill(0));

                $.ajax({
                    type: 'get',
                    url: 'setup.php',
                    data: $('form').serialize(),
                    success: function (data) {
                        for(let i = 0; i < data.length; i++){
                            grid[data[i][0]][data[i][1]] = 1;
                        }
                        $("#display").html("");
                        makeBoard();
                    }   
                });
            });

        </script>
    </body>
</html>